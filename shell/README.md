# Claude Route SSL - é¡¹ç›®ç®¡ç†è„šæœ¬

æœ¬ç›®å½•åŒ…å«ç®¡ç†Claude Route SSLé¡¹ç›®çš„æ‰€æœ‰è„šæœ¬å·¥å…·ã€‚

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### ğŸš€ run.sh - é¡¹ç›®å¯åŠ¨è„šæœ¬
å®Œæ•´å¯åŠ¨Claude Route SSLé¡¹ç›®çš„æ‰€æœ‰æœåŠ¡ã€‚

**åŠŸèƒ½ï¼š**
- ç¼–è¯‘TypeScriptä»£ç 
- æ£€æŸ¥å¹¶å¯åŠ¨RedisæœåŠ¡
- å¯åŠ¨PM2è¿›ç¨‹ (claude-proxy)
- æ£€æŸ¥å¹¶é…ç½®nginx
- éªŒè¯æ‰€æœ‰æœåŠ¡çŠ¶æ€

**ä½¿ç”¨ï¼š**
```bash
cd /home/leon/claude-route-ssl/claude-route-ssl/shell
./run.sh
```

### ğŸ”„ restart.sh - é¡¹ç›®é‡å¯è„šæœ¬
é‡å¯é¡¹ç›®çš„æ ¸å¿ƒæœåŠ¡ã€‚

**åŠŸèƒ½ï¼š**
- é‡æ–°ç¼–è¯‘æœ€æ–°ä»£ç 
- é‡å¯PM2è¿›ç¨‹
- æ£€æŸ¥å¹¶å¯åŠ¨RedisæœåŠ¡
- é‡è½½nginxé…ç½®
- éªŒè¯æ‰€æœ‰æœåŠ¡çŠ¶æ€

**ä½¿ç”¨ï¼š**
```bash
./restart.sh
```

### ğŸ›‘ stop.sh - é¡¹ç›®åœæ­¢è„šæœ¬
åœæ­¢Claude Route SSLé¡¹ç›®è¿›ç¨‹ã€‚

**åŠŸèƒ½ï¼š**
- åœæ­¢PM2è¿›ç¨‹
- å¯é€‰æ‹©åˆ é™¤PM2è¿›ç¨‹
- ä¿æŒnginxå’ŒRedisæœåŠ¡è¿è¡Œï¼ˆç”¨äºå…¶ä»–é¡¹ç›®ï¼‰
- æ˜¾ç¤ºæœåŠ¡çŠ¶æ€

**ä½¿ç”¨ï¼š**
```bash
./stop.sh
```

### ğŸ“Š status.sh - é¡¹ç›®çŠ¶æ€æ£€æŸ¥è„šæœ¬
è¯¦ç»†æ£€æŸ¥é¡¹ç›®æ‰€æœ‰æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ã€‚

**åŠŸèƒ½ï¼š**
- ç³»ç»Ÿä¿¡æ¯å’Œèµ„æºä½¿ç”¨
- PM2è¿›ç¨‹è¯¦ç»†çŠ¶æ€
- ç«¯å£ç›‘å¬çŠ¶æ€
- æœåŠ¡è¿è¡ŒçŠ¶æ€
- SSLè¯ä¹¦çŠ¶æ€
- ç½‘ç»œè¿æ¥æµ‹è¯•
- æœåŠ¡çŠ¶æ€æ€»ç»“

**ä½¿ç”¨ï¼š**
```bash
./status.sh
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæœåŠ¡
- **PM2è¿›ç¨‹**: claude-proxy (ç«¯å£8080)
- **Nginxä»£ç†**: api.justprompt.pro â†’ localhost:8080
- **Rediså­˜å‚¨**: ç«¯å£6380 (è´¦æˆ·å’Œå¯†é’¥ç®¡ç†)
- **SSLè¯ä¹¦**: Let's Encrypt (è‡ªåŠ¨ç»­ç­¾)

### æœåŠ¡ä¾èµ–å…³ç³»
```
Internet â†’ Nginx (443/80) â†’ Claude Route SSL (8080) â†’ Redis (6380)
                â†“
         SSL Certificate (Let's Encrypt)
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
shell/
â”œâ”€â”€ run.sh        # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ restart.sh    # é‡å¯è„šæœ¬  
â”œâ”€â”€ stop.sh       # åœæ­¢è„šæœ¬
â”œâ”€â”€ status.sh     # çŠ¶æ€æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ medium.sh     # Mediumçº§åˆ«å¯†é’¥ç”Ÿæˆ
â”œâ”€â”€ high.sh       # Highçº§åˆ«å¯†é’¥ç”Ÿæˆ
â”œâ”€â”€ generate-key.sh  # åŸºç¡€å¯†é’¥ç”Ÿæˆ
â””â”€â”€ README.md     # æœ¬æ–‡æ¡£
```

## ğŸš¦ ä½¿ç”¨æµç¨‹

### é¦–æ¬¡éƒ¨ç½²
1. ç¡®ä¿åŸŸå `api.justprompt.pro` è§£æåˆ°æœåŠ¡å™¨
2. å®‰è£…ä¾èµ–ï¼šnginx, certbot, redis-server, pm2
3. è¿è¡Œå¯åŠ¨è„šæœ¬ï¼š`./run.sh`

### æ—¥å¸¸ç®¡ç†
- **æŸ¥çœ‹çŠ¶æ€**: `./status.sh`
- **é‡å¯æœåŠ¡**: `./restart.sh`
- **åœæ­¢æœåŠ¡**: `./stop.sh`
- **æŸ¥çœ‹æ—¥å¿—**: `pm2 logs claude-proxy`

### æ•…éšœæ’é™¤
1. æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š`./status.sh`
2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š`pm2 logs claude-proxy --lines 50`
3. é‡å¯æœåŠ¡ï¼š`./restart.sh`
4. å¦‚æœé—®é¢˜æŒç»­ï¼Œè¿è¡Œå®Œæ•´å¯åŠ¨ï¼š`./run.sh`

## âš ï¸ é‡è¦è¯´æ˜

### æ’é™¤æ–‡ä»¶
- `forward-monitor.ts` - æµ‹è¯•ä»£ç ï¼Œä¸å‚ä¸é¡¹ç›®ç¼–è¯‘å’Œè¿è¡Œ
- å·²åœ¨ `tsconfig.json` ä¸­æ’é™¤æ­¤æ–‡ä»¶

### æœåŠ¡ç«¯å£
- **8080**: Claude Route SSLä¸»æœåŠ¡
- **6380**: Redisæ•°æ®å­˜å‚¨
- **80/443**: Nginx HTTP/HTTPS

### SSLè¯ä¹¦
- åŸŸåï¼šapi.justprompt.pro
- è‡ªåŠ¨ç»­ç­¾å·²é…ç½®
- è¯ä¹¦è·¯å¾„ï¼š`/etc/letsencrypt/live/api.justprompt.pro/`

### æ•°æ®å­˜å‚¨
- è´¦æˆ·æ•°æ®ï¼š`/account/` ç›®å½•
- äº§å“å¯†é’¥ï¼š`/product/` ç›®å½•
- Redisç¼“å­˜ï¼šç«¯å£6380

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿä¾èµ–
- Node.js (å·²å®‰è£…)
- PM2: `npm install -g pm2`
- Nginx: `sudo apt install nginx`
- Redis: `sudo apt install redis-server`
- Certbot: `sudo apt install certbot python3-certbot-nginx`

### æƒé™è¦æ±‚
- è„šæœ¬éœ€è¦æ‰§è¡Œæƒé™
- éœ€è¦sudoæƒé™æ“ä½œnginxå’Œç³»ç»ŸæœåŠ¡
- éœ€è¦è®¿é—®SSLè¯ä¹¦ç›®å½•æƒé™

## ğŸ“ æ”¯æŒä¸ç»´æŠ¤

### ç›‘æ§
- PM2è‡ªåŠ¨é‡å¯ï¼šé…ç½®äº†å†…å­˜é™åˆ¶å’Œé‡å¯å»¶è¿Ÿ
- SSLè‡ªåŠ¨ç»­ç­¾ï¼šLet's Encrypt + certbotå®šæ—¶ä»»åŠ¡
- æœåŠ¡å¥åº·æ£€æŸ¥ï¼šä½¿ç”¨status.shå®šæœŸæ£€æŸ¥

### æ—¥å¿—æ–‡ä»¶
- PM2æ—¥å¿—ï¼š`logs/pm2-*.log`
- Nginxæ—¥å¿—ï¼š`nginx/logs/*.log`
- SSLç»­ç­¾æ—¥å¿—ï¼š`nginx/logs/ssl-renewal.log`

### å¤‡ä»½å»ºè®®
- å®šæœŸå¤‡ä»½ `/account/` ç›®å½•
- å®šæœŸå¤‡ä»½ `/product/` ç›®å½•  
- å¤‡ä»½nginxé…ç½®æ–‡ä»¶
- å¤‡ä»½Redisæ•°æ®ï¼ˆå¦‚éœ€è¦ï¼‰